<!DOCTYPE html>
<html>
<head>
  <title>Select Your Team</title>
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <h2>Select Your Team</h2>

  <div id="playerList"></div>
  <p id="readyStatus">Ready: 0 / 0</p>

  <select id="teamSelect">
    <option value="CSK">Chennai Super Kings</option>
    <option value="MI">Mumbai Indians</option>
    <option value="RCB">Royal Challengers Bangalore</option>
    <option value="KKR">Kolkata Knight Riders</option>
    <option value="RR">Rajasthan Royals</option>
    <option value="SRH">Sunrisers Hyderabad</option>
    <option value="DC">Delhi Capitals</option>
    <option value="LSG">Lucknow Super Giants</option>
    <option value="GT">Gujarat Titans</option>
    <option value="PBKS">Punjab Kings</option>
  </select>

  <button onclick="selectTeam()">Select Team</button>
  <button onclick="markReady()">Ready</button>

  <script>
    const socket = io();
    const urlParams = new URLSearchParams(window.location.search);
    const room = urlParams.get('room');
    const username = urlParams.get('username');

    socket.emit('joinRoom', { room, username });

    function selectTeam() {
      const team = document.getElementById('teamSelect').value;
      socket.emit('selectTeam', { room, team });
    }

    function markReady() {
      socket.emit('markReady', { room });
    }

    socket.on('roomStatus', ({ players, readyCount }) => {
      document.getElementById('playerList').innerHTML = players.map(p => `<p>${p.username} - ${p.team || 'No Team'}</p>`).join('');
      document.getElementById('readyStatus').innerText = `Ready: ${readyCount} / ${players.length}`;
    });

    socket.on('startGame', () => {
      window.location.href = `auction.html?room=${room}`;
    });
  </script>
</body>
</html>
